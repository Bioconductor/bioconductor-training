---
title: "Resources"
format: html
editor: visual
execute:
  message: false
  warning: false
  echo: false
---

The table below lists various resources for learning and teaching Bioconductor. If you're looking for more information or have updates, feel free to suggest changes via issues or contact us as described [here](index.qmd).

```{r}
# Load necessary libraries
library(readr)
library(dplyr)
library(htmltools)

# Function to read resources data
read_resources <- function(file_path) {
  tryCatch({
    resources <- read_tsv(file_path, 
                          col_types = cols(.default = "c"),
                          na = c("", "NA", "N/A"))
    resources
  }, error = function(e) {
    stop("Error reading the TSV file: ", e$message)
  })
}

# Load the data from the TSV file
resources_data <- read_resources("resources-table.tsv")

# Function to replace NA with empty strings
replace_na_with_empty <- function(x) {
  if (is.na(x)) "" else x
}

# Define styles for category and resource rows with reduced padding and smaller font
category_style <- "background-color: #f0f0f0; font-weight: bold; border-bottom: 2px solid #ddd; font-size: 12px;"  # Lighter grey and smaller font
resource_style <- "background-color: #ffffff !important; border-bottom: 1px solid #ddd; font-size: 12px;"  # Smaller font size for rows

# Create the HTML table with categories as headings
html_table <- paste0(
  "<table data-quarto-disable-processing='true' style='border-collapse: collapse; width: 100%; border: 1px solid #ddd;'>", # Add data-quarto-disable-processing attribute
  "<thead>",
  "<tr style='background-color: #f6f8fa; font-weight: bold; border-bottom: 2px solid #ddd; font-size: 12px;'>",  # Reduced font size for headers
  "<th style='border-right: 1px solid #ddd; padding: 4px;'>Resource</th>",
  "<th style='border-right: 1px solid #ddd; padding: 4px; text-align: center;'>Acquire the Fundamentals (novice R)</th>",
  "<th style='border-right: 1px solid #ddd; padding: 4px; text-align: center;'>Acquire the Fundamentals (experienced R)</th>",
  "<th style='border-right: 1px solid #ddd; padding: 4px; text-align: center;'>Analyze Your Data</th>",
  "<th style='border-right: 1px solid #ddd; padding: 4px; text-align: center;'>Connect with the Community</th>",
  "<th style='border-right: 1px solid #ddd; padding: 4px; text-align: center;'>Train Others</th>",
  "<th style='padding: 4px; text-align: center;'>Develop a Package</th>",
  "</tr>",
  "</thead><tbody>",
  
  # Iterate over the categories and their corresponding resources
  resources_data %>%
    group_by(Category) %>%
    group_split() %>%
    lapply(function(category_group) {
      category_name <- unique(category_group$Category)
      paste0(
        # Lightly shaded category row
        "<tr style='", category_style, "'>", 
        "<td colspan='7' style='padding: 4px;'>", 
        category_name, 
        "</td></tr>",  
        
        # Resource rows with white background and centered X
        apply(category_group, 1, function(row) {
          # Create resource link if URL is available
          resource_link <- if (!is.na(row["URL"]) && row["URL"] != "") {
            paste0("<a href='", row["URL"], "' target='_blank'>", row["Resource"], "</a>")
          } else {
            row["Resource"]
          }
          
          # Construct the resource row with white background and centered X
          paste0("<tr style='", resource_style, "'>",
                 "<td style='border-right: 1px solid #ddd; padding: 4px;'>", resource_link, "</td>",
                 "<td style='border-right: 1px solid #ddd; padding: 4px; text-align: center;'>", replace_na_with_empty(row[3]), "</td>",
                 "<td style='border-right: 1px solid #ddd; padding: 4px; text-align: center;'>", replace_na_with_empty(row[4]), "</td>",
                 "<td style='border-right: 1px solid #ddd; padding: 4px; text-align: center;'>", replace_na_with_empty(row[5]), "</td>",
                 "<td style='border-right: 1px solid #ddd; padding: 4px; text-align: center;'>", replace_na_with_empty(row[6]), "</td>",
                 "<td style='border-right: 1px solid #ddd; padding: 4px; text-align: center;'>", replace_na_with_empty(row[7]), "</td>",
                 "<td style='padding: 4px; text-align: center;'>", replace_na_with_empty(row[8]), "</td>",
                 "</tr>")
        }) %>% paste0(collapse = "")
      )
    }) %>%
    paste0(collapse = ""),
  
  "</tbody></table>"
)

# Output the HTML table using htmltools::HTML()
HTML(html_table)
```